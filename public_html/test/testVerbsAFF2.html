<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="author" content="Mauro Trevisan">
	<link rel="shortcut icon" href="../favicon.png" />

	<title>test</title>

	<script src="../app/AMDLoader.js"></script>

	<script>
		AMDLoader.config = {
			baseUrl: '../app',
			paths: {
				libs: '../libs'
			}
		};


		var composeInfinitive = (function(){
			var themeVowel = ['à', 'é', 'e', 'í', 'í'];

			return function(v){
				return v.prefix + v.radix + themeVowel[v.conjugation - 1] + 'r';
			};
		})();


		require(['tools/lang/morphology/AFFFileRules2', 'tools/lang/morphology/Verb', 'tools/lang/data/VerbsDictionary', 'libs/jsonh'], function(AFFFileRules, Verb, verbsDictionary, JSONH){
			verbsDictionary = JSONH.unpack(verbsDictionary);

var start = +new Date();
			var verbs = [],
				infinitives = [];
			verbsDictionary.forEach(function(infinitive){
				infinitive = composeInfinitive(infinitive).replace(/ɉ/g, 'j');
				if(infinitives.indexOf(infinitive) < 0){
					infinitives.push(infinitive);

					verbs.push(new Verb(infinitive));
				}
			});
//			AFFFileRules.generate(verbs, 1, 0, [2, 4, 8, 9, 10]);
//			AFFFileRules.generate(verbs, 2, 0, [5, 6, 7]);
//			AFFFileRules.generate(verbs, 4, 0, [11]);
//			AFFFileRules.generate(verbs, 5, 2);
//			AFFFileRules.generate(verbs, 6, 2);
//			AFFFileRules.generate(verbs, 7, 2);
//			AFFFileRules.generate(verbs, 8, 0, [12]);
//			AFFFileRules.generate(verbs, 9, 0);
//			AFFFileRules.generate(verbs, 10, 0);
//			AFFFileRules.generate(verbs, 11, 4);
			AFFFileRules.generate(verbs, 12, 8);
console.log(((+new Date() - start) / 1000).toFixed(2) + ' s');
		});/**/

	</script>
</head>

<body>
</body>
</html>
