<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="author" content="Mauro Trevisan">
	<link rel="shortcut icon" href="../favicon.png" />

	<title>test</title>

	<script src="../app/AMDLoader.js"></script>

	<script>
		AMDLoader.config = {
			baseUrl: '../app',
			paths: {
				libs: '../libs'
			}
		};


		var composeInfinitive = (function(){
			var themeVowel = ['à', 'é', 'e', 'í', 'í'];

			return function(v){
				return v.prefix + v.radix + themeVowel[v.conjugation - 1] + 'r';
			};
		})();


		require(['tools/lang/morphology/AFFFileRules', 'tools/lang/morphology/Verb', 'tools/lang/data/VerbsDictionary', 'libs/jsonh'], function(AFFFileRules, Verb, verbsDictionary, JSONH){
			verbsDictionary = JSONH.unpack(verbsDictionary);

			var start = +new Date();

			var verbs = [],
				infinitives = [],
				maxIndex = -1;
			verbsDictionary.forEach(function(infinitive, idx){
//if(idx < 1000)
//	return;
				infinitive = composeInfinitive(infinitive).replace(/ɉ/g, 'j');
				if(infinitives.indexOf(infinitive) < 0){
					infinitives.push(infinitive);

//if(['domàr', 'indomàr', 'domandàr', 'redomandàr', 'domenàr', 'predomenàr', 'domestegàr'].indexOf(infinitive) >= 0 || idx <= maxIndex)
//if(['skoltàr', 'abdikàr'].indexOf(infinitive) >= 0 || idx <= maxIndex)
//if(idx <= maxIndex)
					verbs.push(new Verb(infinitive));
				}
			});
			AFFFileRules.generate(verbs);

			console.log(((+new Date() - start) / 1000).toFixed(2) + ' s');
		});

	</script>
</head>

<body>
</body>
</html>
