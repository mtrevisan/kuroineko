<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="author" content="Mauro Trevisan">
	<link rel="shortcut icon" href="../favicon.png" />

	<title>test verbs</title>

	<script src="../app/AMDLoader.js"></script>

	<script>
		AMDLoader.config = {
			baseUrl: '../app',
			paths: {
				libs: '../libs'
			}
		};

		require(['tools/lang/phonology/Hyphenator', 'tools/lang/phonology/hyphenatorPatterns/vec', 'tools/lang/phonology/Syllabe', 'tools/lang/phonology/Word', 'tools/lang/data/VerbsDictionary', 'libs/jsonh', 'tools/lang/phonology/Word', 'tools/data/StringHelper', 'tools/lang/morphology/Verb', 'tools/lang/morphology/AFFFileRules'], function(Hyphenator, pattern_vec, Syllabe, Word, verbsDictionary, JSONH, Word, StringHelper, Verb, AFFFileRules){
			var all = [],
				idx = 0,
				k, v, themeVowel, a, b;

			var hyphenator = new Hyphenator(pattern_vec);

			verbsDictionary = JSONH.unpack(verbsDictionary);
			for(k in verbsDictionary){
				v = verbsDictionary[k];

				switch(v.conjugation){
					case 1:
						themeVowel = 'à';
						break;
					case 2:
						themeVowel = 'é';
						break;
					case 3:
						themeVowel = 'e';
						break;
					case 4:
						themeVowel = 'ís';
						break;
					case 5:
						themeVowel = 'í';
				}

				if(v.prefix === '' && v.radix === 'konf')
					continue;
				all[idx ++] = v.prefix + v.radix + themeVowel;
			}
			all.sort();
			for(idx = 0; idx < all.length - 1; idx ++){
				a = all[idx];
				b = all[idx + 1];
				if(a === b){
					console.log('!!! form duplicate: ' + a);
					return;
				}
			}


			var getStressThemeT3 = function(infinitive, prefixLength, stressIdx){
				var verb = new Verb(infinitive);

				var themeT3 = generateRegularThemes(verb, prefixLength, stressIdx);

				var stressIndex = Word.getIndexOfStress(themeT3),
					stressType = Word.getStressType(themeT3[stressIndex]);

				return {
					paradigmInfo: {
						stressIndex: stressIndex - (verb.semiSpecial3rd? 1: 0),
						stressType: stressType
					}
				};
			};

			var generateRegularThemes = function(verb, prefixLength, stressIdx){
				//T1
				var themeT1 = verb.infinitive.replace(/.$/, '');

				//T4 = T1: no stress
				var themeT4 = Word.suppressStress(themeT1);

				//T3 = T1: stress TV > (A)PTV | í > <ís>i
				var themeT3 = themeT1;
				if(verb.semiSpecial3rd)
					themeT3 = themeT1.replace(/í$/, '(ís)i');
				else if(verb.special3rd)
					themeT3 += 'si';
				else{
					var syllabationT4 = syllabateThemeT4(themeT4),
						idx = getIndexOfStressThemeT3(verb, themeT1, syllabationT4, stressIdx);
					if(idx >= 0)
						themeT3 = StringHelper.setCharacterAt(themeT4, idx, Word[themeT4[idx].match(/[eo]/) && hasGraveStress(themeT4, syllabationT4, idx)? 'addStressGrave': 'addStressAcute']);
				}

				return themeT3;
			};

			/** @private */
			var syllabateThemeT4 = (function(){
				var trueHyatuses = [
					{matcher: /auspika$/, replacement: 'àuspika'},
					{matcher: /autora$/, replacement: 'àutora'},
					{matcher: /(fr|l)auda$/, replacement: '$1àuda'},
					{matcher: /laurea$/, replacement: 'làurea'},
					{matcher: /naufraga$/, replacement: 'nàufraga'},
					{matcher: /nauxea$/, replacement: 'nàuxea'},
					{matcher: /paupera$/, replacement: 'pàupera'},
					{matcher: /(in|re)staura$/, replacement: '$1stàura'},

					{matcher: /([psŧv])iola$/, replacement: '$1íola'},
					{matcher: /perioda/, replacement: 'períoda'},

					{matcher: /(^(in)?g|([fg])r|(stra)?s)ua$/, replacement: '$1úa'},

					{matcher: /((ar|[ei]n)f|^(dex)?n|([kp]|st)r|^s|(de|in|x)v)ia$/, replacement: '$1ía'}
				];
				var hyphenator = new Hyphenator(pattern_vec);

				return function(themeT4){
					//infer stress position
					var m;
					if(trueHyatuses.some(function(el){ m = el; return this.match(el.matcher); }, themeT4))
						themeT4 = themeT4.replace(m.matcher, m.replacement);

					return hyphenator.hyphenate(themeT4);
				};
			})();

			var themeT3suffixes = [];

			/** @private */
			var getIndexOfStressThemeT3 = (function(){
				var stressIndices = [
					/^(aé|abdikà|abità|abrogà|aerà|a[lr]borà|alterà|anemà|ankorà|ansimà|aplikà|a[lr]bitrà|arpegà|arxarà|ar[dđx]e[nr]à|ar[dđx]i[nñ]à|auspikà|autorà|axità|a[sŧ]idà|edukà|emu[lƚ]à|erpegà|evokà|exekrà|exità|exu[lƚ]à|ibridà|inplikà|inputà|inrità|insu[lƚ]à|integrà|in[sŧ]ità|irità|iterà|ixo[lƚ]à|obl[ei]gà|oke[lƚ]à|okupà|ondu[lƚ]à|onfegà|onto[lƚ]à|op[ae]rà|orbegà|ordenà|ospità|ostregà|uke[lƚ]à|ultimà|u[lƚ]u[lƚ]à|ustegà|uño[lƚ]à)$/,
					/^(ba[gt]o[lƚ]à|ba[lƚ]egà|balsamà|barikà|bearà|beko[lƚ]à|betegà|beverà|beà|bindo[lƚ]à|bisko[lƚ]à|bixegà|bolsegà|bo[sŧ]o[lƚ]à|bu[lƚ][ei]gà|bux[ae]rà|cac[ae]rà|c[ae]ko[lƚ]à|ce[lƚ]erà|cetarà|cico[lƚ]à|cipegà|de[dlƚn]egà|deputà|desputà|destenà|dexinà|de[sŧ]i[mp]à|dindo[lƚ]à|disipà|domenà|dop[ae]rà|dubità|dulkorà|fabregà|femenà|foderà|folgorà|formo[lƚ]à|fornegà|fulm[ei]nà|fu[mr]egà|fustegà|godegà|gomità|gon[dg]o[lƚ]à|guà|[jɉ]o[sŧ]o[lƚ]à|kaba[lƚ]à|kadukà|ka[lƚ]ibrà|ka[lƚ]igà|kalkarà|kalko[lƚ]à|kandidà|kanforà|kapità|karo[lƚ]à|kasegà|kastigà|kauxà|ko[gk]o[lƚ]à|ko[lƚ]egà|komodà|konfutà|koniugà|konplegà|konplikà|koà|kosperà|kumu[lƚ]à|ku[fsŧ]o[lƚ]à|[lƚ]agremà|[lƚ]apidà|[lƚ]audà|[lƚ]aureà|[lƚ]et[ae]rà|[lƚ]exenà|[lƚ]iberà|[lƚ]ikuidà|[lƚ]imegà|[lƚ]imità|[lƚ]isegà|[lƚ]itigà|[lƚ]ogorà|makinà|malgamà|malmenà|manedà|mante[dđgkx]à|man[sŧ]ipà|marxinà|mask[ae]rà|m[ae]stegà|max[ae]rà|maxe[gn]à|ma[sŧ]ipà|medegà|mer[ei]tà|mi[lƚ]ità|mitigà|modu[lƚ]à|mo[km]o[lƚ]à|montegà|morbinà|mormo[lƚr]à|morsegà|mu[cd]arà|mutegà|muti[lƚ]à|m[ou]xegà|muxo[lƚ]à|muà|muñegà|nanarà|naufragà|nauxeà|n[ae]vegà|ninegà|nino[lƚ]à|nià|nodrigà|nomenà|noà|nuvo[lƚ]à|pacarà|palpierà|pante[dđx]à|pa[cp]o[lƚ]à|pasko[lƚ]à|patinà|pauxà|pendo[lƚ]à|penetrà|pe[np]o[lƚ]à|permutà|perorà|perpetrà|pe[rs]tegà|pesto[lƚ]à|petenà|peto[lƚ]à|peverà|pindo[lƚ]à|pio[lƚ]à|pispo[lƚ]à|pixo[lƚ]à|pi[sŧ]egà|pi[rsŧ]o[lƚ]à|pomegà|ponto[lƚ]à|po[pv]o[lƚ]à|poé|publegà|rako[lƚ]à|ran[pt]egà|ranto[lƚ]à|ra[dp]egà|redità|re[cfg]o[lƚ]à|regonà|reklutà|re[lƚn]egà|replegà|replikà|reputà|revokà|rexe[gk]à|re[sŧ]ità|rixegà|ri[gsŧ]o[lƚ]à|rodo[lƚ]à|roegà|ronko[lƚ]à|ron[sŧ]egà|ro[pvx]egà|roà|rubregà|rugo[lƚ]à|rumegà|ruà|sabo[lƚ]à|sagomà|sangonà|sanguenà|saé|sedo[lƚ]à|segregà|seguità|seità|semenà|se[ms]o[lƚ]à|sevità|sibi[lƚ]à|sifo[lƚ]à|sim[ou][lƚ]à|sind[ai]kà|sinkopà|si[sx]o[lƚ]à|sià|sofegà|solfarà|sup[ae]rà|suplegà|surogà|susità|suà|tabu[lƚ]à|tako[lƚ]à|tanbarà|tardigà|tenperà|term[ei]nà|tinpanà|titubà|to[lƚ]erà|ton[bf]o[lƚ]à|torigà|torko[lƚ]à|tosegà|turbinà|tuà|va[lƚ]idà|va[lƚ]utà|vedovà|vendegà|vergo[lƚ]à|vexetà|ve[jɉ]età|videgà|vidimà|vinko[lƚ]à|vio[lƚ]à|vixi[lƚt]à|volto[lƚ]à|vomità|vulnerà|xao[lƚ]à|xemenà|xudegà|xufo[lƚ]à|ñao[lƚ]à|ñiño[lƚ]à|ñoko[lƚ]à|[dđx]enerà|[dđx][ou]go[lƚ]à|[sŧ]a[kp]o[lƚ]à|[sŧ]apegà|[sŧ]e[lƚ]ebrà|[sŧ]i[fgkm]?o[lƚ]à|[sŧ]imegà|[sŧ]irko[lƚ]à|[sŧ]oko[lƚ]à|[sŧ]o[pt]egà|[sŧ]ukarà|[sŧ]upegà|[jɉ]o[sŧ]o[lƚ]à|[jɉ]ubi[lƚ]à|[jɉ]ugu[lƚ]à)$/,
					/^(reaé|abi[lƚ]ità|a[lƚ]eà|amutinà|apokopà|apostrofà|asiderà|axevo[lƚ]à|axeà|a[sŧ]e[lƚ]erà|biaxemà|blaterà|brago[lƚ]à|bramegà|bra[sŧ]o[lƚ]à|broko[lƚ]à|bron[bdt]o[lƚ]à|broà|bru[lƚ]egà|brusketà|bruskinà|brusto[lƚ]à|dia[lƚ]ogà|edifegà|e[lƚ]iminà|epi[lƚ]ogà|eradegà|examenà|exasperà|exautorà|exa[jɉ]erà|exer[sŧ]ità|exonerà|fievarà|fio[sŧ]inà|frapo[lƚ]à|fraudà|frego[lƚ]à|fritegà|frito[lƚ]à|fruà|fruño[lƚ]à|globo[lƚ]à|glutinà|gramo[lƚ]à|grandenà|greto[lƚ]à|grongo[lƚ]à|gruà|i[lƚ]uminà|imaxinà|inalb[eo]rà|inamidà|inarpe[dđx]à|inar[dđx]erà|inaxo[lƚ]à|ina[sŧ]idà|inedukà|inoku[lƚ]à|iri[sŧ]o[lƚ]à|koabità|koordenà|kre[kp]o[lƚ]à|krexemà|kreà|kriko[lƚ]à|kritegà|krià|kroko[lƚ]à|krostenà|krosto[lƚ]à|kroà|omo[lƚ]ogà|o[rs]ixenà|otenperà|piato[lƚ]à|platinà|prategà|predegà|prià|prod[ei]gà|prorogà|prosimà|prosperà|provokà|proà|reanemà|reintegrà|reiterà|scikarà|sfode[gr]à|sfogonà|sfo[jɉ]o[lƚ]à|sforbe[dđx]à|sfulminà|sfumegà|sfuregà|sioperà|skalmanà|skalpo[lƚ]à|skanpanà|skap?o[lƚ]à|skarpe[dđx]à|skasegà|skito[lƚ]à|skodegà|skorporà|skortegà|sko[tv]o[lƚ]à|skoà|spacarà|spanpanà|spantegà|spa[pt]o[lƚ]à|spaxemà|speku[lƚ]à|spe[lƚ]egà|spertegà|spetenà|speto[lƚr]à|speà|spe[sŧ]egà|spif[ae]rà|spigo[lƚ]à|spinfarà|spi[ps]?o[lƚ]à|spirità|spi[sŧ]egà|spolverà|spontegà|spo[pv]o[lƚ]à|spu[lƚ]egà|spuntigà|spuà|stenperà|sterm[ei]nà|stipu[lƚ]à|stomegà|stusegà|stuà|stu[sŧ]egà|trafegà|tranxità|trapo[lƚ]à|tremo[lƚ]à|tri[bdk]o[lƚ]à|troto[lƚ]à|tru[sŧ]idà|xbaf[ae]rà|xbanpo[lƚ]à|xbaporà|xbato[lƚ]à|xba[sŧ]egà|xbe[rt]egà|xbe[sŧ]o[lƚ]à|xbin?go[lƚ]à|xbixegà|xboko[lƚ]à|xbo[ln]segà|xbolsonà|xbo[st]egà|xboxemà|xboà|xbuxo[lƚ]à|xdentegà|xdindo[lƚ]à|xganbarà|xgangerà|xga[xñ]o[lƚ]à|xlanegà|xli[mpsŧ]egà|xluxegà|xma[fn]arà|xmalmenà|xmaserà|xmask[ae]rà|xmego[lƚ]à|xmemorà|xmentegà|xmeo[lƚ]à|xmergo[lƚ]à|xmoko[lƚ]à|xmontegà|xmorgo[lƚ]à|xmuxegà|xnanarà|xnonbo[lƚ]à|xnuà|xrego[lƚ]à|xvanpo[lƚ]à|xvaporà|xvento[lƚ]à|xvergo[lƚ]à|xveto[lƚ]à|xvimenà|xvià|xvolto[lƚ]à|xñao[lƚ]à|xñoko[lƚ]à|x[jɉ]edo[lƚ]à|x[jɉ]o[sŧ]o[lƚ]à)$/,
					/^(anti[sŧ]ipà|arfià|artiko[lƚ]à|ba[lƚ]uxenà|bix[ei]go[lƚ]à|bonifegà|borondo[lƚ]à|dekapità|de[lƚ]apidà|de[lƚ]iberà|depoxità|desemenà|desiferà|desimi[lƚ]à|determinà|devià|dexabità|dexalborà|dexanemà|dexautorà|dexiderà|dexordenà|de[sŧ]ako[lƚ]à|domestegà|ekuivokà|enfià|eskorporà|espetorà|esterminà|fad[ei]gà|fe[lƚ]i[sŧ]ità|fi[lƚ]oxofà|fo[lƚ]iskarà|idroxenà|inbago[lƚ]à|inba[lƚ]egà|inbals[ae]mà|inbanbo[lƚ]à|inbav[ae]rà|inbeverà|inboko[lƚ]à|inbolsamà|inbonbegà|inbovo[lƚ]à|inboxemà|inb[ou][sŧ]o[lƚ]à|inbuxerà|indafarà|indasenà|ind[eu]bità|indoà|infa[sŧ]o[lƚ]à|infervorà|infistegà|infià|infogonà|infoibà|infumegà|inganb[ae]rà|ingato[lƚ]à|ingurxità|inguà|inkaba[lƚ]à|inkanevà|inkankarà|inkaro[lƚ]à|inkatigà|inko[dlƚ]egà|inkogo[lƚ]à|inkomodà|inkonko[lƚ]à|inkorporà|inkotegà|inkoto[lƚ]à|inku[sŧ]o[lƚ]à|inleà|inluminà|inmanegà|inmask[ae]rà|inmaxarà|inmucarà|inpaco[lƚ]à|inpatinà|inp[ae]verà|inpe[gnt]o[lƚ]à|inpi[crsŧ]o[lƚ]à|inpolverà|inpomo[lƚ]à|inrodo[lƚ]à|insako[lƚ]à|insangonà|insanguenà|insemo[lƚ]à|inseà|insolfarà|inso[sŧ]o[lƚ]à|intanbarà|intardegà|intardigà|intavo[lƚ]à|inte[lƚ]erà|intenperà|interogà|interpretà|intito[lƚ]à|intor[kg]o[lƚ]à|intosegà|inva[lƚ]idà|invergo[lƚ]à|investigà|invià|involto[lƚ]à|inxako[lƚ]à|inxeregà|in[đx]enerà|in[sŧ]ako[lƚ]à|in[sŧ]ango[lƚ]à|in[sŧ]eregà|in[sŧ]ukarà|in[jɉ]emarà|iske[lƚ]etrà|ispaxemà|ispeà|ispirità|istuà|kapito[lƚ]à|karako[lƚ]à|kata[lƚ]ogà|katastegà|ko[jɉ]onb[ae]rà|komunegà|[lƚ]emoxinà|[lƚ]exitimà|manipo[lƚ]à|marangonà|mañifegà|notifegà|obliterà|pa[lƚ]ifegà|parafraxà|paxifegà|perifraxà|periodà|pete[dđgx]o[lƚ]à|preokupà|purifegà|ratifegà|rebeko[lƚ]à|rebondo[lƚ]à|regurxità|rekal[sŧ]itrà|rekapità|rekuperà|remerità|repo[pv]o[lƚ]à|resemenà|resusità|revolto[lƚ]à|romanxinà|sfiamegà|sfraxenà|sfrego[lƚ]à|sfritegà|sfri[dđx]egà|skre[kpsŧ]o[lƚ]à|skri[ksŧ]o[lƚ]à|skroko[lƚ]à|sofistegà|so[lƚ]e[sŧ]ità|strako[lƚ]à|strango[lƚ]à|strapegà|strepità|striko[lƚ]à|strià|stro[lƚ]egà|struko[lƚ]à|subordenà|suseguità|te[lƚ]efonà|verifegà|verigo[lƚ]à|vinifegà|xbiaxemà|xbraità|xbraso[lƚ]à|xbra[sŧ]o[lƚ]à|xbrefe[lƚ]à|xbrind[eo][lƚ]à|xbri[sŧ]o[lƚ]à|xbrodegà|xbrodo[lƚ]à|xbronko[lƚ]à|xdrumenà|xgramo[lƚ]à|xgrendenà|xgreto[lƚ]à|xgri[sŧ]o[lƚ]à|xgron[gsŧ]o[lƚ]à|xguindo[lƚ]à|xirando[lƚ]à|xmiao[lƚ]à|[dđx][ou]gato[lƚ]à|[jɉ]e[glƚ]omarà|)$/,
					/^(anplifegà|defraudà|desfabr(eg|ik)à|desfogonà|deskankarà|deskapità|deskavedà|deskodegà|deskomodà|despe[nt]o[lƚ]à|despetenà|despetorà|desp[ei]go[lƚ]à|despolverà|destego[lƚ]à|destenperà|desterminà|destoko[lƚ]à|destuà|dexba[fv][ae]rà|dexbingo[lƚ]à|dexboxemà|dexbo[sŧ]o[lƚ]à|dexbu[sx]o[lƚ]à|dexdà|dexganbarà|dexlanegà|dexmanegà|dexmaskarà|dexm[eo]ntegà|dexmestegà|dexmunegà|dexnaxo[lƚ]à|dexnià|dexnonbo[lƚ]à|dexn[ou]à|dexri[sŧ]o[lƚ]à|dexverxenà|dexvià|dol[sŧ]ifegà|sfad[ei]gà|falsifegà|farnetikà|farnetegà|formigo[lƚ]à|fortifegà|inaxeà|inbra[sŧ]o[lƚ]à|infrapo[lƚ]à|ingravidà|inkrosto[lƚ]à|inkro[sŧ]o[lƚ]à|inprià|inskato[lƚ]à|inske[lƚ]etrà|inspaxemà|inspeà|inspirità|instaurà|intrapo[lƚ]à|introità|kalki[dđx]o[lƚ]à|klasifegà|konpanegà|konpenetrà|konsiderà|kontaminà|moltiplegà|mortifegà|parte[sŧ]ipà|permudarà|perseguità|piovexinà|posti[sŧ]ipà|predestenà|predomenà|presostatà|prexudegà|profumegà|pronostegà|regroà|represtinà|respexo[lƚ]à|restaurà|rin[đx]ovenà|sakrifegà|scarifegà|skomunegà|spe[sŧ]ifegà|stenografà|straordenà|tartufo[lƚ]à|tramudarà|xbixigo[lƚ]à|xbonigo[lƚ]à|xgarofo[lƚ]à)$/,
					/^(strasaé|barafuxo[lƚ]à|desfrego[lƚ]à|destr[ei]go[lƚ]à|dexabi[lƚ]ità|dexbramegà|dexbraxo[lƚ]à|dexgr[ae]ndenà|identifegà|inverigo[lƚ]à|inxeñato[lƚ]à|konglomerà|kongratu[lƚ]à|kuantifegà|rekapito[lƚ]à|rinproverà|senplifegà|skarnifegà|skonbuso[lƚ]à|skonpaxenà|sprexudegà|stra[ns]uà|straseko[lƚ]à|xbarbato[lƚ]à|[sŧ]entrifugà)$/,
					/^(dexbonigo[lƚ]à|dexinfià|dexintosegà|informigo[lƚ]à|inkantexemà|konpanadegà|reinproverà|rekonsiderà|skrimiato[lƚ]à)$/,
					/^(inkat[ao]rigo[lƚ]à|[sŧ]irkumnavegà|despropoxità)$/,
					/^dexlonbrià$/
				];

				return function(verb, themeT1, syllabationT4, stressIdx){
					var themeVowel = themeT1[themeT1.length - 1],
						idx = -1;
					//all but second conjugation parossitone (which does not need to backtrack stress)
					if(themeVowel != 'e'){
						if(!stressIndices.some(function(re, i){ idx = i; return !!this.match(re); }, themeT1))
							//note: about 83.8% of the verbs have the stress on the penultimate syllabe
							idx = syllabationT4.getGlobalIndexOfStressedSyllabe(syllabationT4.syllabes.length > 1 && !verb.irregularity.darStarFar? -2: -1);

						if(idx >= 0 && idx != stressIdx)
							themeT3suffixes[themeT1] = stressIdx;
					}
					return idx;
				};
			})();

			var hasGraveStress = (function(){
				var infixes = [
					/^e([flƚ]a|xe|xi|du)/,
					/aela/,
					/[lp]ea/,
					/lexe/,
					/^re([dglƚs]a|xe|go)/,
					/xrego/,
					/be([fglƚ]a|re|ko)/,
					/ce([fklƚrst]a|[lƚ]e|ko)/,
					/de([lƚt]a|[bsŧ]i|[dlƚ]e)/,
					/đe[lƚ]a/,
					/fe([rst]a|tu)/,
					/ie[đgtx]a/,
					/[jɉ]e[lƚt]a/,
					/ke(ga|[lƚ]e)/,
					/le([fv]a|via|gua|[sŧ]i|fo)/,
					/me([lƚr]a|dia|[dr]e|ri)/,
					/ne([glƚr]a|bia|du|t[ei])/,
					/pe([cklƚrt]a|te|po|[kt]u)/,
					/re([dsŧ]i|pli|[lƚ]e|klu)/,
					/se([dlƚrs]a|dia|re|v?i|gui|ko|tu)/,
					/te([glƚr]a|dia|[lƚ]e|[sŧ]i|ro|nu)/,
					/ŧe([flƚ]a|[lƚr]e|tu)/,
					/ve([clƚ]a|ria)/,
					/xe([lƚt]a|[mr]e|gui)/,

					/er([st]a|pe)/,
					/ber[gl]a/,
					/fervo/,
					/[jɉ]erma/,
					/ker[msŧ]a/,
					/[dl]erna/,
					/mer(da|[sŧ]ia)/,
					/ner[bv]a/,
					/per(la|[pt]e|mu)/,
					/ser([btv]a|vi)/,
					/ter([gnsŧ]a|(m|pr)e|mi)/,
					/ŧert?a/,
					/ue(([flƚ]|r[cn]?)a|stu)/,
					/ver([gns]a|[ks]ia|[dx]e)/,
					/xer(ma|[sŧ]i)/,

					/estra/,
					/^[flnrst]?esta/,
					/[un]estra/,
					/deste/,
					/vesti/,

					/lieva/,
					/mie[lƚ]a/,
					/[pt]iera/,
					/pleta/,
					/xle[pv]a/,

					/krea/,
					/bre(ga|via|fe)/,
					/dre[lƚ]a/,
					/greva/,
					/krepa/,
					/pre([gsŧ]a|mia|de)/,
					/tre(bia|pi)/,
					/[gp]re[sŧ]ia/,


					/^o([cjɉkpstx]a|[kp]e|bl[ei])/,
					/o(([bcdfgñ]|[dlƚmnsv]i)a|fri|ku)/,
					/[dn]oa/,
					/poe/,
					/bo([rsŧ]a|[ksŧv]o)/,
					/co[kpt]a/,
					/do([lƚmprstx]a|[lƚmp]e)/,
					/đo[gtv]a/,
					/fo([jɉlƚrst]a|i|go)/,
					/go([mrtx]a|de|mi)/,
					/io([klƚt]a|ŧi)/,
					/[jɉ]o[kt]a/,
					/ko([krstŧx]a|pia|[dt]e|[gkmt]o)/,
					/lo([jɉkmpstŧvx]a|[gx]o)/,
					/mo([jɉklƚstŧ]a|nia|xe|ri|[klƚ]o|du)/,
					/no([jɉklƚstv]a|vra|me|dri)/,
					/ñoko/,
					/po([đjɉlƚtx]a|[ds]e|xi|[kpv]o)/,
					/ro([klƚ]a|[vx]e|[df]o)/,
					/so([jɉmrt]a|nia)/,
					/to([lƚpsŧ]a|[lƚs]e|ko)/,
					/ŧo[lƚt]a/,
					/vo([jɉk]a|[lƚ]e|mi)/,
					/xo[gklƚrstv]a/,

					/^olsa/,
					/^kol[gt]a/,
					/vol([đtx]a|to)/,

					/^or[bđsx]a/,
					/borña/,
					/bao[kx]a/,
					/peota/,
					/dormi/,
					/for[fstŧ]a/,
					/kor([dđnstŧx]a|po)/,
					/mor([bsŧ]a|[kf]ia|se|[gm]o)/,
					/norba/,
					/porta/,
					/tor([ct]a|[kx]ia)/,
					/vor[sŧ]ia/,
					/xor[bt]a/,

					/os(tia|tre|p[ei])/,
					/[mpt]osta/,
					/[ijɉ]ostra/,
					/noste/,
					/sosta/,

					/sco[kp]a/,

					/siope/,

					/bloka/,
					/flosa/,
					/glo(ria|me|bo)/,

					/groa/,
					/bro([dgjɉx]a|de|[dk]o)/,
					/fro[dñx]a/,
					/grosa/,
					/kro([klƚs]a|ko)/,
					/pro([nt]a|pia|[dv]e|spe|di|vo)/,
					/tro([clƚñstŧx]a|le|to)/
				];
				//note: only /^(re)?xeta/ is a true positive, so /xeta/ is used in 'infixes' and /[aun]xeta/ here
				var falsePositives = [/^(inca|des|[pr]o|sco)?peta/, /[aun]xeta/, /^[pv]e[lƚ]a/, /^(re)?poxa/];

				return function(themeT4, syllabationT4, idx){
					idx = syllabationT4.getSyllabeIndex(idx);
					return (StringHelper.isMatching(Word.suppressStress(syllabationT4.syllabes[idx] + syllabationT4.syllabes[idx + 1]), infixes)
						&& !StringHelper.isMatching(themeT4, falsePositives));
				};
			})();


			var start = (new Date()).getTime();

			//var errorPrefix = 0;
			var errorStressMissing = 0,
				errorStressPositionExpectedLate = 0,
				errorStressPositionExpectedEarly = 0,
				errorStressType = 0,
				coniugationType = [0, 0, 0, 0, 0],
				stressTypeAcute = 0,
				proparossitone = 0;
			for(k in verbsDictionary){
				v = verbsDictionary[k];

				coniugationType[v.conjugation - 1] ++;
				if(v.stressType == 'a')
					stressTypeAcute ++;

				switch(v.conjugation){
					case 1:
						themeVowel = 'à';
						break;
					case 2:
						themeVowel = 'é';
						break;
					case 3:
						themeVowel = 'e';
						break;
					case 4:
					case 5:
						themeVowel = 'í';
				}

				var infinitive = v.prefix + v.radix + themeVowel + 'r';

				//skip highly irregular verbs
//				if(infinitive.match(/(^|[^s])av?ér$/))
//					continue;

				if(v.conjugation != 3 && Word.getIndexOfStress(infinitive) != infinitive.length - 2){
					console.log('!!! form error: ' + infinitive + ' cannot be of ' + v.conjugation + ' conjugation');

					return;
				}

				var stressIdx = v.prefix.length + v.stressIdx;
				try{
					var result = getStressThemeT3(infinitive, v.prefix.length, stressIdx);
				}
				catch(e){
					console.log(infinitive + ': ', e);
				}

				/*if(conjugation.prefix !== v.prefix){
					errorPrefix ++;

					console.log('prefix error for ' + infinitive + ': ' + v.prefix + ' != ' + conjugation.prefix);
				}*/

				if(result.paradigmInfo.stressIndex < 0){
					errorStressMissing ++;

					console.log(infinitive + ': missing stress');
				}
				else{
					var expected = v.prefix + v.radix;
					if(v.conjugation == 4)
						expected += 'is';
					if(v.stressType == 'a' && (expected[stressIdx] || themeVowel).match(/a/) || v.stressType == 'g' && (expected[stressIdx] || themeVowel).match(/[iu]/)){
						console.log('!!! form error: ' + infinitive + ' with vowel on index ' + stressIdx + ' cannot have ' + (v.stressType == 'a'? 'an acute': 'a grave') + ' stress');

						return;
					}
					expected = expected.substr(0, stressIdx)
						+ Word[v.stressType == 'a'? 'addStressAcute': 'addStressGrave'](Word.suppressStress(expected[stressIdx] || themeVowel))
						+ expected.substr(stressIdx + 1) + 'e';
					if(Word.getIndexOfStress(expected) == null){
						console.log('!!! form error: ' + expected + ' without vowel on index ' + stressIdx);

						return;
					}

					var syllabation = hyphenator.hyphenate(infinitive);
					if(result.paradigmInfo.stressIndex < stressIdx){
						errorStressPositionExpectedLate ++;

						console.log(infinitive + ': expected late ' + hyphenator.hyphenate(expected).syllabes.join('-'));
					}
					else if(result.paradigmInfo.stressIndex > stressIdx){
						errorStressPositionExpectedEarly ++;

						console.log(infinitive + ': expected early ' + hyphenator.hyphenate(expected).syllabes.join('-'));
					}
					else if(result.paradigmInfo.stressType[0] != v.stressType){
						errorStressType ++;

						console.log(syllabation.syllabes.join('-') + ': expected stress ' + expected[stressIdx]);
					}
					else if(syllabation.syllabes.length - syllabation.getSyllabeIndex(result.paradigmInfo.stressIndex) > 2)
						proparossitone ++;
				}
			}

			console.log(themeT3suffixes);

			console.log('time taken:   ' + ((new Date()).getTime() - start) + ' ms');

			var size = verbsDictionary.length;
			var padSizeLog10 = String(Math.max(errorStressMissing, errorStressPositionExpectedLate, errorStressPositionExpectedEarly, errorStressType)).length;
			//var padSizeLog10 = String(Math.max(errorPrefix, errorStressMissing, errorStressPositionExpectedLate, errorStressPositionExpectedEarly, errorStressType)).length;
			if(/*errorPrefix +*/ errorStressMissing + errorStressPositionExpectedLate + errorStressPositionExpectedEarly + errorStressType == 0){
				console.log('verbal forms: ' + size);
				console.log('-àr:            ' + leftPad((100 * coniugationType[0] / size).toFixed(1), 4) + '%');
				console.log('-ér:            ' + leftPad((100 * coniugationType[1] / size).toFixed(1), 4) + '%');
				console.log('\'-er:           ' + leftPad((100 * coniugationType[2] / size).toFixed(1), 4) + '%');
				console.log('-ír/-ís-:       ' + leftPad((100 * coniugationType[3] / size).toFixed(1), 4) + '%');
				console.log('-ír:            ' + leftPad((100 * coniugationType[4] / size).toFixed(1), 4) + '%');
				console.log('acute stress:   ' + leftPad((100 * stressTypeAcute / size).toFixed(1), 4) + '%');
				console.log('proparossitone: ' + leftPad((100 * proparossitone / size).toFixed(1), 4) + '%');
			}
			else{
				//if(errorPrefix > 0)
				//	console.log('error on prefix:\t\t ' + leftPad((100 * errorPrefix / size).toFixed(2), 7) + '% (' + leftPad(errorPrefix, padSizeLog10) + '/' + size + ')');
				if(errorStressMissing > 0)
					console.log('error on stress missing:\t' + leftPad((100 * errorStressMissing / size).toFixed(2), 7) + '% (' + leftPad(errorStressMissing, padSizeLog10) + '/' + size + ')');
				if(errorStressPositionExpectedLate > 0)
					console.log('error on stress position late:\t' + leftPad((100 * errorStressPositionExpectedLate / size).toFixed(2), 7) + '% (' + leftPad(errorStressPositionExpectedLate, padSizeLog10) + '/' + size + ')');
				if(errorStressPositionExpectedEarly > 0)
					console.log('error on stress position early:\t' + leftPad((100 * errorStressPositionExpectedEarly / size).toFixed(2), 7) + '% (' + leftPad(errorStressPositionExpectedEarly, padSizeLog10) + '/' + size + ')');
				if(errorStressType > 0)
					console.log('error on stress type:\t\t\t' + leftPad((100 * errorStressType / size).toFixed(2), 7) + '% (' + leftPad(errorStressType, padSizeLog10) + '/' + size + ')');
			}


			var showDicForms = function(verbs){
				if(verbs && verbs.length){
					console.log('');

					verbs = verbs.map(Word.markDefaultStress)
						.map(function(v){ return new Verb(v); });
					AFFFileRules.generateDic(verbs);
				}
			};

			var verbs = ['sorapóner'];
			showDicForms(verbs);
		});

		var leftPad = function(str, size, character){
			return (Array(size).join(character || ' ') + str).slice(-size);
		};

		var testLatinVerbs = function(){
			var rules = [
					[/mi(ss?|t)/i, 'met'], [/tim/i, 'tem'], [/vid/i, 'ved'],
					[/bea/ig, 'pi'],
					[/[ĕĭ]([ao])/i, '$1'],
					[/au/i, 'al'],
					[/vi(sse)$/i, '$1'],
					//future only
					//[/b([iĭou])/ig, 'r$1'],
					[/b([aāeĕēiĭouŭ])/ig, 'v$1'],
					[/vis./ig, 's'],
					[/v[uŭ]i/ig, 've'],
					[/[aāeēiĭī]s$/i, 'is'],
					[/ui$/i, 'éi'],
					[/[ai](n?t)$/i, 'e$1'],
					[/ntis$/i, 'ntes'],
					[/[āē]tis$/i, 'es'], [/[ĭī]tis$/i, 'is'],
					[/itus$/i, 'utus'],
					[/([āēĭīuŭ]m)u[ms]$/i, 'ón'],
					[/unt$/, 'an'],
					[/u[ms]$/i, 'o'],
					[/(m|s|[ns]?t)$/i, ''],
					[/^h/i, ''], [/e h(av)?/i, ''],
					[/([āēĭī])te$/i, '$1'],
					[/[ăā]/gi, 'a'], [/[ĕē]/gi, 'e'], [/[ĭī]/gi, 'i'], [/[ŏō]/gi, 'o'], [/[ŭū]/gi, 'u'],
					[/([^aăāeĕēiĭīoŏōuŭū])(\1)/gi, '$1']
				];

			var transform = function(word, rules){
				var len = rules.length, tuple, i;
				for(i = 0; i < len; i ++){
					tuple = rules[i];
					word = word.replace(tuple[0], tuple[1]);
					}
				return word;
				};

			var words = [
				/*'indicative present:',
				['amo', 'amāmus', 'amas', 'amātis', 'amat', 'amant'],
				['monĕo', 'monēmus', 'mones', 'monētis', 'monet', 'monent'],
				['mitto', 'mittĭmus', 'mittes', 'mittĭtis', 'mittet', 'mittent'],
				['audĭo', 'audīmus', 'audis', 'audītis', 'audit', 'audĭunt'],
				['sum', 'sumus', 'es', 'estis', 'est', 'sunt'],
				['habĕo', 'habēmus', 'habes', 'habētis', 'habet', 'habent'],
				'indicative imperfect:',
				['amābam', 'amabāmus', 'amābas', 'amabātis', 'amābat', 'amābant'],
				['monēbam', 'monebāmus', 'monēbas', 'monebātis', 'monēbat', 'monēbant'],
				['mittēbam', 'mittebāmus', 'mittēbas', 'mittebātis', 'mittēbat', 'mittēbant'],
				['audiēbam', 'audiebāmus', 'audiēbas', 'audiebātis', 'audiēbat', 'audiēbant'],
				['eram', 'erāmus', 'eras', 'erātis', 'erat', 'erant'],
				['habēbam', 'habebāmus', 'habēbas', 'habebātis', 'habēbat', 'habēbant'],
				'indicative future:',
				['amābo', 'amabĭmus', 'amābis', 'amabĭtis', 'amābit', 'amābunt'],
				['monēbo', 'monebĭmus', 'monēbis', 'monebĭtis', 'monēbit', 'monēbunt'],
				['mittam', 'mittēmus', 'mittes', 'mittētis', 'mittet', 'mittent'],
				['audĭam', 'audiēmus', 'audĭes', 'audiētis', 'audĭet', 'audĭent'],
				['ero', 'erimus', 'eris', 'eritis', 'erit', 'erunt'],
				['habēbo', 'habebĭmus', 'habēbis', 'habebĭtis', 'habēbit', 'habēbunt'],
				'subjuntive present:',
				['amem', 'amēmus', 'ames', 'amētis', 'amet', 'ament'],
				['menĕam', 'moneāmus', 'menĕas', 'moneātis', 'menĕat', 'menĕant'],
				['mittam', 'mittāmus', 'mittas', 'mittātis', 'mittat', 'mittant'],
				['audĭam', 'audiāmus', 'audĭas', 'audiātis', 'audĭat', 'audĭant'],
				['sim', 'simus', 'sis', 'sitis', 'sit', 'sint'],
				['habĕam', 'habeāmus', 'habĕas', 'habeātis', 'habĕat', 'habĕant'],
				'subjuntive imperfect:',
				['amavissem', 'amavissēmus', 'amavisses', 'amavissētis', 'amavisset', 'amavissent'],
				['monuissem', 'monuissēmus', 'monuisses', 'monuissētis', 'monuisset', 'monuissent'],
				['misissem', 'misissēmus', 'misisses', 'misissētis', 'misisset', 'misissent'],
				['audivissem', 'audivissēmus', 'audivisses', 'audivissētis', 'audivisset', 'audivissent'],
				['habuissem', 'habuissēmus', 'habuisses', 'habuissētis', 'habuisset', 'habuissent'],
				['fuissem', 'fuissēmus', 'fuisses', 'fuissētis', 'fuisset', 'fuissent'],
				'conditional:',
				['amāre habŭi', 'amāre habuĭmus', 'amāre habuisti', 'amāre habuistis', 'amāre habŭit', 'amāre habuērunt'],
				'imperative:',
				['ama', 'amāte'],
				['mone', 'monēte'],
				['mitte', 'mittĭte'],
				['audi', 'audīte'],
				['habe', 'habēte'],
				['es', 'este'],
				'participle present:',
				['amantis'],
				['monentis'],
				['mittentis'],
				['audientis'],
				['habentis'],
				['esentis'],
				'participle perfect:',
				['amatus'],
				['monitus'],
				['missus'],
				['auditus'],
				['habitus'],
				['sutus'],
				'gerundive present:',
				['amando'],
				['monendo'],
				['mittendo'],
				['audiendo'],
				['habendo'],
				['esendo']/**/
				];

			//var words = ['habo', 'habimus', 'habis', 'habitis', 'habit', 'habunt'];
			var size = words.length, len, wordLatin, wordVenetan, i, j;
			for(i = 0; i < size; i ++){
				if(typeof words[i] === 'string'){
					console.log(words[i]);
					continue;
					}

				len = words[i].length;
				for(j = 0; j < len; j ++){
					wordLatin = words[i][j];
					wordVenetan = transform(wordLatin, rules);

					console.log(wordLatin + ' > ' + wordVenetan);
					}
				console.log('\n');
				}
		};
	</script>
</head>

<body>
</body>
</html>
